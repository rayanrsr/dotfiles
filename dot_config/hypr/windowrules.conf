#
# Window rules (new syntax)
# Hyprland 2025 breaking change: windowrulev2 / legacy rules removed.
# Syntax: windowrule = <effects...>, match:<prop> <value> [, match:<prop> <value> ...]
#

# Web Browsers
windowrule = workspace 2, match:class (Navigator|firefox|firefoxdeveloperedition|firefox-esr|firefox-nightly|Brave-browser|Brave-browser-nightly|Chromium|Chromium-browser|Google-chrome|Google-chrome-stable|Google-chrome-beta|Google-chrome-unstable|Vivaldi-stable|zen-bin|zen|Zen)
windowrule = workspace 2, match:class (Navigator|Firefox|Zen-browser|Brave-browser|Chromium|Google-chrome|Vivaldi-stable|firefoxdeveloperedition|firefox-esr|firefox-nightly|Brave-browser-nightly|Chromium-browser|Google-chrome-stable|Google-chrome-beta|Google-chrome-unstable|Vivaldi-stable|zen-bin)
# set opacity to 0.9 for zen browser
windowrule = opacity 0.9 0.9, match:class zen

# Terminals
windowrule = workspace 1, match:class (Alacritty|Tilix|Kitty|kitty|ghostty|Ghostty|com.mitchelh.ghostty)
windowrule = workspace 1, match:class com\.mitchellh\.ghostty
windowrule = workspace 1, match:title RayTerm

# Disable borders for Vicinae launcher
windowrule = border_size 0, match:class vicinae
windowrule = no_shadow on, match:class vicinae

# no border for Xdg-desktop-portal-gtk
windowrule = border_size 0, match:class Xdg-desktop-portal-gtk
windowrule = no_shadow on, match:class Xdg-desktop-portal-gtk

# Dolphin org.kde.dolphin no opacity
windowrule = opacity 0.9 0.9, match:class (dolphin|Dolphin|org\.kde\.dolphin)


# Code Editors
windowrule = workspace 1, match:class (Code|code)
windowrule = workspace 1, match:class (Cursor|cursor)
windowrule = opacity 0.9 0.9, match:class (Code|code|Cursor|cursor)

# Communication
windowrule = workspace 4, match:class (discord|Spotify|vesktop|Slack|slack)

# Gaming
# Send Steam, launchers, and games to workspace 5
windowrule = workspace 5, match:class (Steam|Steam-native|Steam-native-runtime|Steam-runtime|Steam Guard - Computer Authorization Required|Steam - News|Steam - Friends|Steam - Library|steam|lutris|Lutris|minecraft-launcher)
windowrule = workspace 5, match:class ^(steam_app_.*|lutris_game_class|minigalaxy|playnite_game_class|gamescope|chiaki|moonlight|com\.moonlight_stream\.Moonlight|.*[Ww]ine.*)$
windowrule = workspace 5, match:class ^(steam|com\.valvesoftware\.Steam|net\.lutris\.Lutris|itch|io\.itch\.itch|heroic|com\.heroicgameslauncher\.hgl|r2modman)$
# Set steam client to 0.9 opacity
windowrule = opacity 0.9 0.9, match:class steam

# Tile only the main Steam window; let popups/menus/dialogs float naturally
windowrule = tile on, match:class ^(steam|Steam|com\.valvesoftware\.Steam)$, match:title ^Steam$
windowrule = float on, match:class ^(steam|Steam|com\.valvesoftware\.Steam)$, match:title ^(?!Steam$).+$

# fix XWayland issues: prevent "empty" XWayland helper windows from stealing focus
windowrule = float on, no_focus on, match:class ^$, match:title ^$, match:xwayland true
windowrule = no_blur on, match:xwayland true
windowrule = stay_focused on, match:title ^\(\)$, match:class ^steam$
windowrule = min_size 1 1, match:title ^\(\)$, match:class ^steam$


# Graphics
windowrule = workspace 6, match:class (Gimp|gimp|Inkscape)

# PoE specific rules
windowrule = tag +poe, match:title Path of Exile
windowrule = tag +poe, match:class steam_app_238960
windowrule = float on, match:tag poe

windowrule = tag +apt, match:title Awakened PoE Trade
windowrule = float on, match:tag apt
windowrule = no_focus on, match:tag apt
windowrule = no_shadow on, match:tag apt
windowrule = border_size 0, match:tag apt
windowrule = size 100% 100%, match:tag apt
windowrule = center on, match:tag apt

# XWayland rules
windowrule = no_anim on, match:class ^xwaylandvideobridge$
windowrule = no_initial_focus on, match:class ^xwaylandvideobridge$
windowrule = max_size 1 1, match:class ^xwaylandvideobridge$
windowrule = float on, match:title ^Picture-in-Picture$
windowrule = pin on, match:title ^Picture-in-Picture$

# Brave browser specific rules
windowrule = no_anim on, match:class ^Brave-browser$
windowrule = no_initial_focus on, match:class ^Brave-browser$
windowrule = max_size 1 1, match:class ^Brave-browser$
windowrule = float on, match:title ^Brave$
windowrule = pin on, match:title ^Brave$

# Awakened PoE Trade / PoE (dedupe / keep intent)
windowrule = fullscreen on, match:tag poe

windowrule = no_blur on, match:tag apt
windowrule = pin on, match:tag apt
windowrule = render_unfocused on, match:tag apt

